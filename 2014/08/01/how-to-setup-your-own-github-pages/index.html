<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--> <!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--> <!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]--> <head> <meta charset="utf-8"> <title>A Hacker's Guide to Her Own GitHub Pages - Hey, I’m Parker.</title> <meta name="author" content="Parker Moore"> <meta name="description" content="GitHub Pages is a wonderful free platform GitHub has created to build and host your Jekyll sites for you. You push up any valid Jekyll site to a repo &hellip;"> <!-- http://t.co/dKP3o1e --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="canonical" href="http://blog.parkermoore.de/2014/08/01/how-to-setup-your-own-github-pages/"> <link href="/favicon.ico" rel="icon"> <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css"> <script src="/javascripts/modernizr-2.0.js"></script> <script src="/javascripts/ender.js"></script> <script src="/javascripts/octopress.js" type="text/javascript"></script> <link href="/atom.xml" rel="alternate" title="Hey, I’m Parker." type="application/atom+xml"> <!--Fonts from Google"s Web font directory at http://google.com/webfonts --> <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-24416132-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </head> <body > <header role="banner"><hgroup> <h1><a href="/">Hey, I’m Parker.</a></h1> <h2>Creator of music, photography, and (mostly open) software.</h2> </hgroup> </header> <nav role="navigation"><ul class="subscription" data-subscription="rss"> <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li> </ul> <form action="http://google.com/search" method="get"> <fieldset role="search"> <input type="hidden" name="q" value="site:blog.parkermoore.de" /> <input class="search" type="text" name="q" results="0" placeholder="Search"/> </fieldset> </form> <ul class="main-navigation"> <li><a href="/">Blog</a></li> <li><a href="/archives/">Archives</a></li> <li><a href="http://parkermoore.de">About</a></li> </ul> </nav> <div id="main"> <div id="content"> <div> <article class="hentry" role="article"> <header> <h1 class="entry-title">A Hacker's Guide to Her Own GitHub Pages</h1> <p class="meta"> <time datetime="2014-08-01T14:42:58-04:00" pubdate data-updated="true">Aug 1<span>st</span>, 2014</time> </p> </header> <div class="entry-content"><p><a href="https://pages.github.com">GitHub Pages</a> is a wonderful free platform GitHub has created to build and host your Jekyll sites for you. You push up any valid Jekyll site to a repo (on a special branch), and it&#39;s built and published to a predictable URL. The only downside? You can&#39;t use any custom Ruby code, which means no custom plugins. So what&#39;s the best way to host a Jekyll site that requires plugins?</p> <p>Maybe you&#39;re writing a huge website for your employer, or just something small for yourself. Either way, you need a plugin or two to get it <em>just right</em>. You could build locally and push the compiled site up to GitHub Pages, but that requires that you install all the dependencies locally and write a script to compile and jostle things in just the right way to make it all work. What if you could have the same workflow – just <code>git push</code> – for sites with custom plugins?</p> <p>You can. I do it every day. In fact, my personal site (https://parkermoo.re) is published with this method. Here&#39;s a step-by-step guide to making your own GitHub Pages.</p> <h2>1. Install and Configure Dependencies</h2> <p>You&#39;ll need the following:</p> <ol> <li>A server with <code>root</code> access. I use a Rackspace CentOS 1GB Performance VM, but you can use any Linux system from any provider.</li> <li>A web server if you don&#39;t have one already (Apache/Nginx).</li> <li>Ruby and RubyGems with the proper permissions to install new gems.</li> <li>Git</li> <li><a href="https://github.com/sitaramc/gitolite">Gitolite</a></li> </ol> <p>First, <code>sudo su - root</code>. Then install Ruby. I suggest using <code>rbenv</code> to keep your Rubies organized. Then ensure RubyGems is installed, and install the <code>github-pages</code> gem.</p> <p>Next, ensure you have a daemonized web server installed, like <code>nginx</code> or <code>apache</code>.</p> <p>Then ensure git is installed and create a new <code>git</code> user. Run <code>su - git</code> and install <code>gitolite</code>.</p> <p>Once you have <code>gitolite</code> installed, go back to your local machine and configure <code>gitolite</code> as described. You&#39;ll need to add a new user for your SSH key and create the repo for your site.</p> <h2>2. Add the post-receive hook</h2> <p>Run <code>sudo su - git</code> and find the <code>post-receive</code> file in your repository. It&#39;s usually at <code>/home/git/repositories/MY_REPO.git/hooks/post-receive</code>. Edit it so it looks like this:</p> <div class="highlight"><pre><code class="bash"><span class="nb">set</span> -e <span class="c"># fail on error</span>

<span class="c"># ensure you have loaded git's environment with rbenv/ruby/jekyll in the path</span>
<span class="nb">source</span> /home/git/.bash_profile

<span class="c"># this is only if you have rbenv installed</span>
<span class="c"># remove if you're using a stock ruby</span>
<span class="nb">eval</span> <span class="s2">"</span><span class="k">$(</span>rbenv init -<span class="k">)</span><span class="s2">"</span>

<span class="c"># this shows you where the Jekyll executable can be found</span>
<span class="c"># it will also fail if jekyll can't be found, halting the build.</span>
which jekyll

<span class="c"># this is the name of your repo, without the `.git`</span>
<span class="nv">REPO_NAME</span><span class="o">=</span><span class="s2">"MY_REPO"</span>

<span class="nv">GIT_REPO</span><span class="o">=</span><span class="nv">$HOME</span>/repositories/<span class="nv">$REPO_NAME</span>.git
<span class="nv">TMP_GIT_CLONE</span><span class="o">=</span>/tmp/<span class="nv">$REPO_NAME</span>

<span class="c"># Change this to wherever your server (nginx/apache) will look</span>
<span class="c"># for your compiled site. Usually called the document root.</span>
<span class="nv">PUBLIC_WWW</span><span class="o">=</span>/var/www/<span class="nv">$REPO_NAME</span>

git clone <span class="nv">$GIT_REPO</span> <span class="nv">$TMP_GIT_CLONE</span>

<span class="c"># Run Jekyll!</span>
<span class="nb">cd</span> <span class="nv">$TMP_GIT_CLONE</span> <span class="o">&amp;&amp;</span> jekyll build -d <span class="nv">$PUBLIC_WWW</span> --trace
rm -Rf <span class="nv">$TMP_GIT_CLONE</span>
<span class="nb">exit</span></code></pre></div> <p>This hook will clone your repo to <code>/tmp</code> and run <code>jekyll build</code> from your site source into the directory your server will serve from.</p> <h2>3. Add the git remote</h2> <p>Go back to your local site and add the remote:</p> <div class="highlight"><pre><code class="bash"><span class="gp">$ </span>git remote add publish git@example.org:MY_REPO.git</code></pre></div> <h2>4. Test</h2> <p>Now, to test, just push!</p> <div class="highlight"><pre><code class="bash"><span class="gp">$ </span>git push publish master</code></pre></div> <p>You should see all the output of the Jekyll process in your terminal. Once you see <code>...done.</code> and the process exits, you&#39;re done! Refresh your browser and admire your handiwork.</p> <p>If you get a <code>LoadError</code> from Jekyll, then you don&#39;t have a gem installed or it can&#39;t access the <code>_plugins</code> directory. To install new gems, just run <code>gem install GEM_NAME</code> as <code>root</code> on your VM.</p> </div> <footer> <p class="meta"> <span class="byline author vcard">Posted by <span class="fn">Parker Moore</span></span> <time datetime="2014-08-01T14:42:58-04:00" pubdate data-updated="true">Aug 1<span>st</span>, 2014</time> <span class="categories"> <a class='category' href='/categories/github/'>github</a>, <a class='category' href='/categories/github-pages/'>github-pages</a>, <a class='category' href='/categories/jekyll/'>jekyll</a>, <a class='category' href='/categories/tech/'>tech</a> </span> </p> <div class="sharing"> </div> <p class="meta"> <a class="basic-alignment left" href="/2014/07/16/dont-like-being-tracked/" title="Previous Post: Don’t Like Being Tracked?">&laquo; Don’t Like Being Tracked?</a> <a class="basic-alignment right" href="/2014/08/01/header-anchor-links-in-vanilla-javascript-for-github-pages-and-jekyll/" title="Next Post: Header Anchor Links in Vanilla JavaScript for GitHub Pages and Jekyll">Header Anchor Links in Vanilla JavaScript for GitHub Pages and Jekyll &raquo;</a> </p> </footer> </article> </div> <aside class="sidebar"> <section> <h1>Recent Posts</h1> <ul id="recent_posts"> <li class="post"> <a href="/2014/08/01/header-anchor-links-in-vanilla-javascript-for-github-pages-and-jekyll/">Header Anchor Links in Vanilla JavaScript for GitHub Pages and Jekyll</a> </li> <li class="post"> <a href="/2014/08/01/how-to-setup-your-own-github-pages/">A Hacker's Guide to Her Own GitHub Pages</a> </li> <li class="post"> <a href="/2014/07/16/dont-like-being-tracked/">Don’t Like Being Tracked?</a> </li> <li class="post"> <a href="/2014/04/27/clearing-up-confusion-around-baseurl/">Clearing Up Confusion Around baseurl</a> </li> <li class="post"> <a href="/2014/04/03/always-moving-forward/">Always Moving Forward</a> </li> </ul> </section> <section> <h1>GitHub Repos</h1> <ul id="gh_repos"> <li> <a href="https://github.com/jekyll/jekyll">Jekyll</a> <p>Jekyll is a blog-aware, static site generator in Ruby.</p> </li> <li> <a href="https://github.com/parkr/centos-bootstrap">centos-bootstrap</a> <p>Hassle-free way to bootstrap CentOS 6.3 with development packages.</p> </li> <li> <a href="https://github.com/parkr/witness">witness</a> <p>Chat log server for humans</p> </li> <li> <a href="https://github.com/imathis/octopress">Octopress</a> <p>Octopress is an obsessively designed framework for Jekyll blogging.</p> </li> </ul> <a href="https://github.com/parkr">@parkr</a> on GitHub </section> <section> <p>Follow <a href="http://twitter.com/parkr">@parkr</a></p> </section> </aside> </div> </div> <footer role="contentinfo"><p> Copyright &copy; 2014 - Parker Moore - <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> </p> </footer> </body> </html>
